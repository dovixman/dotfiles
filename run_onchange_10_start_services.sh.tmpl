#!/bin/bash

# Setup and start macOS services for window management and status bar

echo "ğŸš€ Configurando servicios de escritorio..."

# Start SketchyBar service
if command -v sketchybar &>/dev/null; then
  echo "ğŸ“Š Iniciando SketchyBar..."
  brew services start sketchybar
  
  if pgrep -x "sketchybar" >/dev/null; then
    echo "âœ… SketchyBar iniciado correctamente"
  else
    echo "âš ï¸ SketchyBar no se pudo iniciar automÃ¡ticamente"
  fi
else
  echo "âš ï¸ SketchyBar no encontrado. AsegÃºrate de ejecutar 'brew bundle' primero."
fi

# Start AeroSpace (it should auto-start on login, but we can ensure it's running)
if command -v aerospace &>/dev/null; then
  echo "ğŸªŸ Verificando AeroSpace..."
  
  if ! pgrep -x "AeroSpace" >/dev/null; then
    echo "ğŸš€ Iniciando AeroSpace..."
    open -a AeroSpace
    sleep 2
  fi
  
  if pgrep -x "AeroSpace" >/dev/null; then
    echo "âœ… AeroSpace estÃ¡ ejecutÃ¡ndose"
  else
    echo "âš ï¸ AeroSpace no se pudo iniciar automÃ¡ticamente"
  fi
else
  echo "âš ï¸ AeroSpace no encontrado. AsegÃºrate de ejecutar 'brew bundle' primero."
fi

echo "ğŸ‰ ConfiguraciÃ³n de servicios completada"